<!DOCTYPE html>
<html>
<head><title>Book Ticket</title></head>
<body>
<h2>Book Ticket</h2>
<form id="booking-form">
    <label>Your Email:</label><br/>
    <input type="email" name="email" required><br/><br/>
    <button type="submit">Book Ticket</button>
</form>

<script>
    // Extract eventId from URL ?eventId=xxxx
    const params = new URLSearchParams(window.location.search);
    const eventId = params.get('eventId');

    const form = document.getElementById('booking-form');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = form.email.value;

        fetch(`/book/${eventId}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: `email=${encodeURIComponent(email)}`
        })
            .then(res => res.text())
            .then(msg => alert(msg))
            .catch(console.error);
    });
</script>
</body>
</html>
