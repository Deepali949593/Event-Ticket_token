<!DOCTYPE html>
<html>
<head>
    <title>Events</title>
</head>
<body>
<h2>Events</h2>
<ul id="events-list"></ul>

<script>
    fetch('/events')
        .then(response => {
            if (!response.ok) throw new Error("Network response was not ok");
            return response.json();
        })
        .then(events => {
            const list = document.getElementById('events-list');
            list.innerHTML = "";  // Clear if anything exists

            if (events.length === 0) {
                list.textContent = "No events available.";
                return;
            }

            events.forEach(event => {
                const li = document.createElement('li');
                li.textContent = `${event.name} (${event.date}) `;

                const link = document.createElement('a');
                link.href = `book.html?eventId=${event.id}`;
                link.textContent = "Book Ticket";

                li.appendChild(link);
                list.appendChild(li);
            });
        })
        .catch(error => {
            console.error('Error fetching events:', error);
            document.getElementById('events-list').textContent = "Failed to load events.";
        });
</script>
</body>
</html>
